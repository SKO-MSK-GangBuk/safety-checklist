<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>현장 위험성 평가표 작성</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<h2>현장 위험성 평가표 작성</h2>

<div class="form" id="mainForm">
  <label>협력사명 <input type="text" id="son_company" oninput="generateImage()"></label>
  <label>도급사명 <input type="text" id="mother_company" oninput="generateImage()"></label>
  <label>일시 <input type="date" id="date" oninput="generateImage()"></label>
  <label>국소명 <input type="text" id="location" oninput="generateImage()"></label>
  <label>작업공종 <input type="text" id="what_do" oninput="generateImage()"></label>
  <label>투입인원 <input type="text" id="inspector" oninput="generateImage()"></label>

  <details>
    <summary>기상 상태</summary>
    <label><input type="checkbox" value="weather_clear" onchange="generateImage()"> 맑음</label>
    <label><input type="checkbox" value="weather_wind" onchange="generateImage()"> 강풍</label>
    <label><input type="checkbox" value="weather_rain_or_snow" onchange="generateImage()"> 비/눈</label>
    <label><input type="checkbox" value="weather_hot" onchange="generateImage()"> 폭염</label>
    <label><input type="checkbox" value="weather_cold" onchange="generateImage()"> 한파</label>
  </details>

  <label>체감온도 <input type="text" id="fake_temperature" oninput="generateImage()"></label>
  <label>기온 <input type="text" id="real_temperature" oninput="generateImage()"></label>

  <details>
    <summary>건설장비</summary>
    <label><input type="checkbox" value="machine_crane" onchange="generateImage()"> 크레인</label>
    <label><input type="checkbox" value="machine_sky" onchange="generateImage()"> 스카이</label>
    <label><input type="checkbox" value="machine_sj" onchange="generateImage()"> 시저형 고소작업대</label>
    <label><input type="checkbox" value="machine_labbercar" onchange="generateImage()"> 사다리차</label>
    <label><input type="checkbox" value="machine_forklift" onchange="generateImage()"> 지게차</label>
    <label><input type="checkbox" value="machine_dumptruck" onchange="generateImage()"> 덤프트럭</label>
    <label><input type="checkbox" value="machine_excavator" onchange="generateImage()"> 굴착기</label>
    <label><input type="checkbox" value="machine_pumpcar" onchange="generateImage()"> 펌프카</label>
    <label><input type="checkbox" value="machine_mixtruck" onchange="generateImage()"> 믹서트럭</label>
    <label><input type="checkbox" value="machine_ect" id="machine_ect_cb" onchange="toggleEtc('machine_ect_cb', 'machine_etc_wrap')"> 기타</label>
    <div id="machine_etc_wrap" class="etc-input">
        <input type="text" id="machine_ect_text" placeholder="기타 장비 명칭 입력" oninput="generateImage()">
    </div>
  </details>
  <label>신호수 이름 <input type="text" id="come_here" oninput="generateImage()"></label>
  <label>협력사 비상연락망 <input type="text" id="whtch_me" oninput="generateImage()"></label>
  <label>협력사 비상연락망 <input type="text" id="mothrt_company_sos" oninput="generateImage()"></label>
  <label>협력사 비상연락망 <input type="text" id="company_sos" oninput="generateImage()"></label>
  
  <details>
    <summary>현장 특성</summary>
    <label><input type="checkbox" value="site_road_outside" onchange="generateImage()"> 도로 가장 차선</label>
    <label><input type="checkbox" value="site_road_inside" onchange="generateImage()"> 도로 중앙 차선</label>
    <label><input type="checkbox" value="site_road_narrow" onchange="generateImage()"> 골목길/농로/비포장</label>
    <label><input type="checkbox" value="site_inside" onchange="generateImage()"> 구내(건물안)</label>
    <label><input type="checkbox" value="site_in_height" onchange="generateImage()"> 천정 내 작업</label>
    <label><input type="checkbox" value="site_high_height" onchange="generateImage()"> 높은 층고(5m 이상)</label>
    <label><input type="checkbox" value="site_apart_parking" onchange="generateImage()"> 건물 내 지하 주차장</label>
    <label><input type="checkbox" value="site_drop_danger" onchange="generateImage()"> 자재, 공도구 낙하위험</label>
    <label><input type="checkbox" value="site_near_road" onchange="generateImage()"> 도로변/터널/지하차도</label>
    <label><input type="checkbox" value="site_near_voltage" onchange="generateImage()"> 전력선, 변압기 근접</label>
    <label><input type="checkbox" value="site_near_hivoltage" onchange="generateImage()"> 특고압 방호관 설치</label>
    <label><input type="checkbox" value="site_site_ect" id="site_site_ect_cb" onchange="toggleEtc('site_site_ect_cb', 'site_site_etc_wrap')"> 기타</label>
    <div id="site_site_etc_wrap" class="etc-input">
        <input type="text" id="site_site_ect_text" placeholder="현장 특이사항 입력" oninput="generateImage()">
    </div>
  </details>

  <details>
    <summary>공통사항</summary>
    <label><input type="checkbox" value="common_equipment" onchange="generateImage()"> 개인보호구 착용 확인</label>
    <label><input type="checkbox" value="common_machine" onchange="generateImage()"> 건설장비 안전장치 확인</label>
    <label><input type="checkbox" value="common_health" onchange="generateImage()"> 팀원 건강상태 확인</label>
    <label><input type="checkbox" value="common_tool" onchange="generateImage()"> 공도구 사용 전 점검</label>
    <label><input type="checkbox" value="common_stop_work" onchange="generateImage()"> 작업중지 기준 준수</label>
    <label><input type="checkbox" value="common_danger" onchange="generateImage()"> 유해 위험요인 확인</label>
    <label><input type="checkbox" value="common_heavy" onchange="generateImage()"> 중량물 취급 사항 확인</label>
  </details>
  
  <details>
    <summary>혹서기 용품 지참유무</summary>
    <label><input type="checkbox" value="hot_thermometer" onchange="generateImage()"> 온습도계</label>
    <label><input type="checkbox" value="hot_water" onchange="generateImage()"> 얼음물</label>
    <label><input type="checkbox" value="hot_icebox" onchange="generateImage()"> 아이스박스</label>
    <label><input type="checkbox" value="hot_candy" onchange="generateImage()"> 식엽정</label>
    <label><input type="checkbox" value="hot_rest" onchange="generateImage()"> 휴게시설</label>
    <label><input type="checkbox" value="hot_ect" id="hot_ect_cb" onchange="toggleEtc('hot_ect_cb', 'hot_etc_wrap')"> 기타</label>
    <div id="hot_etc_wrap" class="etc-input">
        <input type="text" id="hot_ect_text" placeholder="혹서기 기타 사항" oninput="generateImage()">
    </div>
  </details>

  <details>
    <summary>혹한기 용품 지참유무</summary>
    <label><input type="checkbox" value="cold_warmer" onchange="generateImage()"> 핫팩</label>
    <label><input type="checkbox" value="cold_cloth" onchange="generateImage()"> 발열조끼</label>
    <label><input type="checkbox" value="cold_ect" id="cold_ect_cb" onchange="toggleEtc('cold_ect_cb', 'cold_etc_wrap')"> 기타</label>
    <div id="cold_etc_wrap" class="etc-input">
        <input type="text" id="cold_ect_text" placeholder="혹한기 기타 사항" oninput="generateImage()">
    </div>
  </details>

  <label>추가 위험요인 및 대책
    <input type="text" id="danger_ect_point" placeholder="위험요인" oninput="generateImage()">
    <input type="text" id="danger_ect_todo" placeholder="대책" oninput="generateImage()">
  </label>

  <details>
    <summary>작업장 환경</summary>
    <label><input type="checkbox" value="site_roof" onchange="generateImage()"> 건물(옥상)</label>
    <label><input type="checkbox" value="site_rooftop" onchange="generateImage()"> 건물(옥탑)</label>
    <label><input type="checkbox" value="site_pool" onchange="generateImage()"> 전주</label>
    <label><input type="checkbox" value="site_steel_tower" onchange="generateImage()"> 철탑</label>
    <label><input type="checkbox" value="site_strong_pool" onchange="generateImage()"> 강관주</label>
    <label><input type="checkbox" value="site_inbuilding" onchange="generateImage()"> 인빌딩(RF)</label>
    <label><input type="checkbox" value="site_ect" id="site_ect_cb" onchange="toggleEtc('site_ect_cb', 'site_etc_wrap')"> 기타</label>
    <div id="site_etc_wrap" class="etc-input">
        <input type="text" id="site_ect_text" placeholder="작업장 특이사항" oninput="generateImage()">
    </div>
  </details>

  <details>
    <summary>위험 요인</summary>
    <label><input type="checkbox" value="risk_fall" onchange="generateImage()"> 떨어짐</label>
    <label><input type="checkbox" value="risk_fall_ladder" onchange="generateImage()"> 떨어짐(사다리)</label>
    <label><input type="checkbox" value="risk_fall_ladder_width" onchange="generateImage()"> 사다리 가로서기</label>
    <label><input type="checkbox" value="risk_car_crush" onchange="generateImage()"> 교통사고</label>
    <label><input type="checkbox" value="risk_heavy_machine" onchange="generateImage()"> 장비 부딫힘/끼임</label>
    <label><input type="checkbox" value="risk_car_fall" onchange="generateImage()"> 넘어짐</label>
    <label><input type="checkbox" value="risk_electric" onchange="generateImage()"> 감전</label>
    <label><input type="checkbox" value="risk_drop" onchange="generateImage()"> 낙하물 발생</label>
    <label><input type="checkbox" value="risk_boom" onchange="generateImage()"> 화재 / 폭발</label>
  </details>

  <hr>
  <p class="iphone-notice">아이폰 사용자는 아래 이미지를 <b>길게 눌러 저장</b>하세요.</p>
  <button onclick="saveImage()" class="save-btn">PC/안드로이드 이미지 다운로드</button>
</div>

<div id="result-container">
    <img id="final-image" src="" alt="결과 이미지 미리보기">
</div>

<canvas id="canvas" style="display: none;"></canvas>

<script src="script.js"></script>
</body>
</html>
